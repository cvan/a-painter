<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Painter</title>
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" href="img/icon-256.png">
    <meta name="description" content="Paint in VR in your browser. Powered by A-Frame.">
    <script src="build.js"></script>
    <!-- <link rel="stylesheet" href="css/main.css"> -->
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
  </head>
  <body>
    <a-scene redux="reducers: worldSettings" pool__star="mixin: star; size: 100;">

      <a-assets>
        <!-- assets -->
        <a-asset-item id="starNames" src="assets/data/starNames.json"></a-asset-item>
        <a-asset-item id="starTypes" src="assets/data/starTypes.json"></a-asset-item>
        <a-asset-item id="exoplanets" src="assets/data/exoplanets.csv"></a-asset-item>
        <a-asset-item id="star-detail-ui-asset" src="assets/models/star-detail-ui.json"></a-asset-item>

        <!-- mixins -->
        <a-mixin id="star" reticle class="star" scale=".25 .25 .25" action-dispatcher="type: SELECT_STAR; value: -1" hover-text="star"></a-mixin>
      </a-assets>

      <!-- STARFIELD -->
      <a-entity id="starfield" position="0 0 -2" starfield redux-bind="worldSettings.starDataState: starfield.starDataState; worldSettings.zoomLevel: starfield.zoomLevel; worldSettings.ui.selectedStar: starfield.selectedStar; worldSettings.starDetails: starfield.starDetails">
        <a-entity id="constellations" constellations redux-bind="worldSettings.time: constellations.time" visible="false"></a-entity>
        <a-entity id="star-detail-spawner" star-detail-spawner redux-bind="worldSettings.ui.selectedStar: star-detail-spawner.selectedStar; worldSettings.starfieldReady: star-detail-spawner.starfieldReady; worldSettings.zoomLevel: star-detail-spawner.zoomLevel"></a-entity>
      </a-entity>

      <a-entity id="right-hand" gearvr-controls></a-entity>

      <a-entity id="acamera" camera="near: 10e-4; far: 10e10" position="0 1.6 1" gearvr-fly-controls look-controls wasd-controls>
        <a-entity id="acursor"
          cursor="fuse: false; fuseTimeout: 1000"
          raycaster="objects: .clickable; recursive: true; far: 100; near: 0"
          position="0 0 0">
              <a-entity id="cursorIndicator"
                geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015; segmentsPhi: 1; segmentsTheta: 24;"
                position="0 0 -1"
                material="color: #ffffff; shader: flat; transparent: true; opacity: .5;"
              ></a-entity>
              <a-entity id="cursorHoverText"
                position="0 -.125 -1"
                text="value: ; align: center; width: 2; height: auto; anchor: center"
                hover-text-display
              ></a-entity>
        </a-entity>
      </a-entity>

      <a-entity id="star-detail-parent">
        <a-entity id="star-detail-ui" look-at="[camera]" star-detail-ui scale="0 0 0" visible="false" redux-bind="worldSettings.selectedStar: star-detail-ui.selectedStar; worldSettings.selectedPanel: star-detail-ui.selectedPanel" look-at>
          <a-entity geometry="primitive: box" position="-1 .15 -1" scale=".4 .2 .1" class="clickable" action-dispatcher="type: SELECT_STAR; value: -1" material="color: #cc0000"></a-entity>
        </a-entity>
      </a-entity>
    </a-scene>

    <div id="star-detail">
    </div>

  </body>
</html>
